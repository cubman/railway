<rules>
    <rule name="Проверка функционирования стрелки 4 вариант" type="ST" area="SplitPoint.A">
        <group>
            <element code="СТ5"/>
            <element code="СТ9"/>
        </group>
        <preCondition>
            <or>
                <condition>
                    <simple state="1"/>
                </condition>
                <condition>
                    <simple state="3"/>
                </condition>
            </or>
        </preCondition>
        <postCondition>
            <if>
                <condition>
                    <and>
                        <condition>
                            <simple state="1"/>
                        </condition>
                        <condition>
                            <simple code="СТ9"/>
                        </condition>
                    </and>
                </condition>
                <then>
                    <print out="console" level="info"
                           text="1. Стрелка СТ9 находится в состоянии 1."/>
                </then>
                <else>
                    <if>
                        <condition>
                            <and>
                                <condition>
                                    <simple state="3"/>
                                </condition>
                                <condition>
                                    <simple code="СТ5"/>
                                </condition>
                            </and>
                        </condition>
                        <then>
                            <and>
                                <condition>
                                    <print out="console" level="info"
                                           text="2. Стрелка СТ5 занята и ожидаем 2 секунды."/>
                                </condition>
                                <condition>
                                    <timer sleep="2"/>
                                </condition>
                                <condition>
                                    <if>
                                        <condition>
                                            <simple state="3"/>
                                        </condition>
                                        <then>
                                            <print out="console" level="info"
                                                   text="3. Стрелка СТ5 занята уже 2 секунды."/>
                                        </then>
                                        <else>
                                            <print out="console" level="info" text="4. Стрелка СТ5 освбодилась."/>
                                        </else>
                                    </if>
                                </condition>
                            </and>
                        </then>
                    </if>
                </else>
            </if>
        </postCondition>
    </rule>
</rules>